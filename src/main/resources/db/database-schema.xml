<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <preConditions>
        <runningAs  username="smartFridge"/>
    </preConditions>

    <changeSet  author="smartFridge"  id="createSequence_food_id">
        <createSequence  dataType="int"
                         incrementBy="1"
                         sequenceName="sequence_food_id"
                         startValue="1"
        />
    </changeSet>

    <changeSet  author="smartFridge"  id="createSequence_foodinventory_id">
        <createSequence  dataType="int"
                         incrementBy="1"
                         sequenceName="sequence_foodinventory_id"
                         startValue="1"
        />
    </changeSet>

    <changeSet  author="smartFridge"  id="createSequence_recipe_id">
        <createSequence  dataType="int"
                         incrementBy="1"
                         sequenceName="sequence_recipe_id"
                         startValue="1"
        />
    </changeSet>

    <changeSet  author="smartFridge"  id="createSequence_fridge_id">
        <createSequence  dataType="int"
                         incrementBy="1"
                         sequenceName="sequence_fridge_id"
                         startValue="1"
        />
    </changeSet>

    <changeSet  author="smartFridge"  id="createSequence_meal_id">
        <createSequence  dataType="int"
                         incrementBy="1"
                         sequenceName="sequence_meal_id"
                         startValue="1"
        />
    </changeSet>

    <changeSet  author="smartFridge"  id="createSequence_revision_seq">
        <createSequence  dataType="int"
                         sequenceName="revision_seq"
        />
    </changeSet>

    <changeSet id="addTableRevision" author="smartFridge">
        <createTable tableName="revision">
            <column name="id" type="BigInt">
                <constraints  primaryKey="true"  nullable="false" primaryKeyName="pk_revision"/>
            </column>
            <column  name="created"  type="timestamp">
                <constraints  nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet  id="createTableFoodInventory"  author="smartFridge">
        <createTable  tableName="FoodInventory">
            <column  name="id"  type="BigInt"  autoIncrement="true">
                <constraints  primaryKey="true"  nullable="false" primaryKeyName="pk_foodinventory"/>
            </column>
            <column  name="food"  type="BigInt">
                <constraints  nullable="false" foreignKeyName="fk_id_food" references="food(id)"/>
            </column>
            <column  name="expirationDate"  type="timestamp"/>
        </createTable>
    </changeSet>

    <changeSet id="addTableFoodInventoryAud" author="smartFridge">
        <createTable tableName="foodinventory_aud">
            <column name="id" type="BigInt">
                <constraints  primaryKey="true"  nullable="false" primaryKeyName="pk_foodinventory_aud"/>
            </column>
            <column name="rev" type="BigInt"/>
            <column name="revtype" type="TinyInt"/>
            <column name="expirationDate_mod" type="Boolean"/>
            <column name="food_mod" type="Boolean"/>
        </createTable>
    </changeSet>

</databaseChangeLog>